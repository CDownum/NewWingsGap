@namespace BudgetGoals
@using NewWingsGap.Web.ApiClients
@attribute [StreamRendering(true)]
@attribute [OutputCache(Duration = 5)]

@inject BudgetApiClient GapApiClient

<h2>Monthly Budget - "Survival"</h2>
<table id="0HNAE2QT671G2" class="b-table table table-striped table-bordered table-hover b-datagrid">
    <thead class="table-thead-theme table-light">
        <tr>
            <th scope="col" style="top: 0px; width: 60px">
                <button id="0HNAE2QT671V4" type="button" class="btn btn-outline-success">New</button>
            </th>
            <th scope="col" style="top: 0px; width: 150px" class="cursor-pointer">
                <div class="d-inline-flex">Description</div>
            </th>
            <th scope="col" style="top: 0px; width: 150px" class="cursor-pointer">
                <div class="d-inline-flex">Amount</div>
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in BudgetItems)
        {
            <tr class="table-default table-row-selectable">
                <td>
                    <div class="gap-2 d-inline-flex">
                        <i class="mdi mdi-pencil" onclick=""></i>
                        <button type="button" class="btn btn-outline-primary">Edit</button>
                        <button type="button" class="btn btn-outline-danger">Delete</button>
                    </div>
                </td>
                <td data-caption="Description">@item.Description</td>
                <td class="text-end" data-caption="Amount">@item.Amount.ToString("C")</td>
            </tr>
        }                        
    </tbody>
    <tfoot>
        <tr>
            <td>
                <i class="bi bi-arrow-left" style="font-size: 2rem; color: cornflowerblue; font-weight: bold "></i>
                
            </td>
            <td><span class="fw-bold">12 Months x Monthly Budget:</span></td>
            <td class="text-end" style="width: 140px">@BudgetItems?.Sum(x => x.Amount)</td>
                
        </tr>
    </tfoot>
</table>

@code { 
    
    [Parameter]
    public BudgetItem[]? BudgetItems { get; set; }
    // private Budget[]? budgets;

    // protected override async Task OnInitializedAsync()
    // {
    //     budgets = await GapApiClient.GetBudgetsByUserIdAsync(1);
    // }
}
